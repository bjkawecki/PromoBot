sequenceDiagram
participant User
participant TelegramBot
participant Backend
participant DB
participant Stripe

    User->>TelegramBot: Klick auf „Jetzt bestellen“-Button
    TelegramBot->>User: Formular senden (Name, Adresse, E-Mail)
    User->>TelegramBot: Formular ausfüllen und absenden
    TelegramBot->>Backend: Bestelldaten übermitteln
    Backend->>DB: Bestellung speichern (Status: "offen")
    Backend->>Stripe: Zahlung starten (Checkout Session erstellen)
    Stripe-->>Backend: Checkout-Link oder Payment URL
    Backend->>TelegramBot: Sende Zahlungslink an User
    TelegramBot->>User: Link zum Stripe-Checkout

    Note over User, Stripe: User bezahlt über Stripe

    Stripe-->>Backend: Webhook: Zahlung erfolgreich
    Backend->>DB: Bestellstatus aktualisieren („bezahlt“)
    Backend->>TelegramBot: Benachrichtige User
    TelegramBot->>User: Bestellung erfolgreich! Zusammenfassung + Statuslink
