flowchart TD
    subgraph User
        U[Telegram User / Käufer]
    end

    subgraph Seller
        S[Verkäufer / Händler]
    end

    subgraph Telegram
        B[Telegram Bot API]
    end

    subgraph AWS_Infra
        ECS[AWS ECS Cluster aiogram Bot]
        Lambda[AWS Lambda Stripe Webhook]
        DynamoDB[DynamoDB]
        Stripe[Stripe Payment Service]
        S3[S3 Bucket für Medien & Rechnungen]
    end

    %% Verbindungen
    U -->|Chat, Button-Clicks| B
    B -->|Webhook-Updates User Aktionen| ECS
    ECS -->|Liest / Speichert Daten| DynamoDB
    ECS -->|Sendet Antworten| B
    ECS -->|Sendet Zahlungsanforderung| Stripe
    Stripe -->|Webhook Benachrichtigung| Lambda
    Lambda -->|Aktualisiert Bestellstatus| DynamoDB
    ECS -->|Lädt Medien / Rechnungen| S3
    ECS -->|Gibt Medien / Rechnungen an User| B

    %% Verkäufer Interaktionen
    S -->|Erstellt Promo, Produkte| ECS
    S -->|Verwalten Bestellungen| ECS
    S -->|Zugriff auf Daten| DynamoDB

    %% Payment Flow
    U -->|Zahlung| Stripe
