<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-05-22T12:00:00.000Z" agent="5.0 (Windows)" etag="abc123" version="20.0.1" type="device">
  <diagram id="architecture" name="Highlevel Architektur">
    <mxGraphModel dx="950" dy="630" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- User -->
        <mxCell id="userGroup" value="User" style="group;rounded=1;whiteSpace=wrap;html=1;fillColor=#d0e7ff;strokeColor=#1a73e8;" vertex="1" parent="1">
          <mxGeometry x="20" y="20" width="160" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="user" value="Telegram User / Käufer" style="ellipse;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1a73e8;" vertex="1" parent="userGroup">
          <mxGeometry x="40" y="40" width="120" height="60" as="geometry"/>
        </mxCell>

        <!-- Seller -->
        <mxCell id="sellerGroup" value="Verkäufer / Händler" style="group;rounded=1;whiteSpace=wrap;html=1;fillColor=#d0f0d0;strokeColor=#4caf50;" vertex="1" parent="1">
          <mxGeometry x="20" y="140" width="160" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="seller" value="Verkäufer / Händler" style="rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#4caf50;" vertex="1" parent="sellerGroup">
          <mxGeometry x="40" y="160" width="120" height="60" as="geometry"/>
        </mxCell>

        <!-- Telegram -->
        <mxCell id="telegramGroup" value="Telegram" style="group;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#fb8c00;" vertex="1" parent="1">
          <mxGeometry x="220" y="20" width="160" height="100" as="geometry"/>
        </mxCell>
        <mxCell id="botAPI" value="Telegram Bot API" style="rectangle;whiteSpace=wrap;html=1;fillColor=#ffcc80;strokeColor=#fb8c00;" vertex="1" parent="telegramGroup">
          <mxGeometry x="240" y="40" width="120" height="60" as="geometry"/>
        </mxCell>

        <!-- AWS Infrastructure -->
        <mxCell id="awsGroup" value="AWS Infrastruktur" style="group;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f4c3;strokeColor=#c0ca33;" vertex="1" parent="1">
          <mxGeometry x="420" y="20" width="340" height="300" as="geometry"/>
        </mxCell>

        <mxCell id="ecs" value="AWS ECS (aiogram Bot)" style="rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#dce775;strokeColor=#afb42b;" vertex="1" parent="awsGroup">
          <mxGeometry x="440" y="40" width="140" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="lambda" value="AWS Lambda (Stripe Webhook)" style="rectangle;rounded=1;whiteSpace=wrap;html=1;fillColor=#dce775;strokeColor=#afb42b;" vertex="1" parent="awsGroup">
          <mxGeometry x="600" y="40" width="140" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="dynamodb" value="DynamoDB (User & Bestellungen)" style="cylinder;whiteSpace=wrap;html=1;fillColor=#dce775;strokeColor=#afb42b;" vertex="1" parent="awsGroup">
          <mxGeometry x="440" y="120" width="140" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="s3" value="S3 Bucket (Medien & Rechnungen)" style="cylinder;whiteSpace=wrap;html=1;fillColor=#dce775;strokeColor=#afb42b;" vertex="1" parent="awsGroup">
          <mxGeometry x="600" y="120" width="140" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="stripe" value="Stripe Payment Service" style="rectangle;whiteSpace=wrap;html=1;fillColor=#fff59d;strokeColor=#fbc02d;" vertex="1" parent="awsGroup">
          <mxGeometry x="520" y="200" width="140" height="60" as="geometry"/>
        </mxCell>

        <!-- Verbindungen -->
        <!-- User --> 
        <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1a73e8;" edge="1" parent="1" source="user" target="botAPI">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label1" value="Chat, Button-Clicks" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#1a73e8;" vertex="1" parent="e1">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <!-- Telegram --> 
        <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1a73e8;" edge="1" parent="1" source="botAPI" target="ecs">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label2" value="Webhook-Updates" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#1a73e8;" vertex="1" parent="e2">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1a73e8;" edge="1" parent="1" source="ecs" target="botAPI">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label3" value="Antworten" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#1a73e8;" vertex="1" parent="e3">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <!-- ECS Daten -->
        <mxCell id="e4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#afb42b;" edge="1" parent="1" source="ecs" target="dynamodb">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label4" value="Liest/Speichert Daten" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#afb42b;" vertex="1" parent="e4">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <mxCell id="e5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#afb42b;" edge="1" parent="1" source="ecs" target="s3">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label5" value="Lädt Medien/Rechnungen" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#afb42b;" vertex="1" parent="e5">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <!-- Stripe & Lambda -->
        <mxCell id="e6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#fbc02d;" edge="1" parent="1" source="ecs" target="stripe">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label6" value="Zahlungsanforderung" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#fbc02d;" vertex="1" parent="e6">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>
        <mxCell id="e7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#fbc02d;" edge="1" parent="1" source="stripe" target="lambda">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label7" value="Webhook Benachrichtigung" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#fbc02d;" vertex="1" parent="e7">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>
        <mxCell id="e8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#afb42b;" edge="1" parent="1" source="lambda" target="dynamodb">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label8" value="Aktualisiert Bestellstatus" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#afb42b;" vertex="1" parent="e8">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <!-- Seller Zugriff -->
        <mxCell id="e9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4caf50;" edge="1" parent="1" source="seller" target="ecs">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label9" value="Erstellt Promo, Produkte, verwaltet Bestellungen" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=12;fontColor=#4caf50;" vertex="1" parent="e9">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <mxCell id="e10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4caf50;" edge="1" parent="1" source="seller" target="dynamodb">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label10" value="Zugriff auf Daten" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#4caf50;" vertex="1" parent="e10">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <!-- User zu Stripe -->
        <mxCell id="e11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1a73e8;" edge="1" parent="1" source="user" target="stripe">
          <mxGeometry relative="1" as="geometry"/>
          <mxCell id="label11" value="Zahlung" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontColor=#1a73e8;" vertex="1" parent="e11">
            <mxGeometry x="0.5" y="-0.5" relative="1" as="geometry"/>
          </mxCell>
        </mxCell>

        <!-- Auth Hinweis -->
        <mxCell id="authNote" value="Authentifizierung & Autorisierung:\n- Nutzer & Verkäufer haben eigene Zugänge\n- Seller kann nur eigene Daten & Aktionen verwalten\n- Bot prüft Rechte bei Anfragen" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=12;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="20" y="340" width="740" height="60" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
